<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="The Graph Courses">

<title>Workshop 2: Automated Data Analysis &amp; Reporting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="week_02_workshop_instructions_files/libs/clipboard/clipboard.min.js"></script>
<script src="week_02_workshop_instructions_files/libs/quarto-html/quarto.js"></script>
<script src="week_02_workshop_instructions_files/libs/quarto-html/popper.min.js"></script>
<script src="week_02_workshop_instructions_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week_02_workshop_instructions_files/libs/quarto-html/anchor.min.js"></script>
<link href="week_02_workshop_instructions_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week_02_workshop_instructions_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week_02_workshop_instructions_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week_02_workshop_instructions_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week_02_workshop_instructions_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#your-final-report-should-contain" id="toc-your-final-report-should-contain" class="nav-link" data-scroll-target="#your-final-report-should-contain">Your final report should contain:</a></li>
  <li><a href="#tool-tracks" id="toc-tool-tracks" class="nav-link" data-scroll-target="#tool-tracks">Tool Tracks</a></li>
  </ul></li>
  <li><a href="#part-1-general-setup-data-selection-all-students" id="toc-part-1-general-setup-data-selection-all-students" class="nav-link" data-scroll-target="#part-1-general-setup-data-selection-all-students">Part 1: General Setup &amp; Data Selection (All Students)</a></li>
  <li><a href="#part-2-tool-specific-instructions" id="toc-part-2-tool-specific-instructions" class="nav-link" data-scroll-target="#part-2-tool-specific-instructions">Part 2: Tool-Specific Instructions</a>
  <ul class="collapse">
  <li><a href="#section-a-for-students-without-prior-coding-experience-using-julius" id="toc-section-a-for-students-without-prior-coding-experience-using-julius" class="nav-link" data-scroll-target="#section-a-for-students-without-prior-coding-experience-using-julius">Section A: For Students WITHOUT Prior Coding Experience (Using Julius)</a></li>
  <li><a href="#section-b-for-students-with-r-coding-experience-using-cursor-with-r" id="toc-section-b-for-students-with-r-coding-experience-using-cursor-with-r" class="nav-link" data-scroll-target="#section-b-for-students-with-r-coding-experience-using-cursor-with-r">Section B: For Students WITH R Coding Experience (Using Cursor with R)</a></li>
  </ul></li>
  <li><a href="#part-3-submission" id="toc-part-3-submission" class="nav-link" data-scroll-target="#part-3-submission">Part 3: Submission</a></li>
  <li><a href="#part-4-optional---add-to-your-github-pages-portfolio" id="toc-part-4-optional---add-to-your-github-pages-portfolio" class="nav-link" data-scroll-target="#part-4-optional---add-to-your-github-pages-portfolio">Part 4: Optional - Add to Your GitHub Pages Portfolio</a>
  <ul class="collapse">
  <li><a href="#upload-your-report-to-github" id="toc-upload-your-report-to-github" class="nav-link" data-scroll-target="#upload-your-report-to-github">Upload Your Report to GitHub</a></li>
  <li><a href="#get-the-direct-link-to-your-report" id="toc-get-the-direct-link-to-your-report" class="nav-link" data-scroll-target="#get-the-direct-link-to-your-report">Get the Direct Link to Your Report</a></li>
  <li><a href="#update-your-portfolio-with-chatgpt-or-gemini" id="toc-update-your-portfolio-with-chatgpt-or-gemini" class="nav-link" data-scroll-target="#update-your-portfolio-with-chatgpt-or-gemini">Update Your Portfolio with ChatGPT or Gemini</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Workshop 2: Automated Data Analysis &amp; Reporting</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>The Graph Courses </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Welcome to another session of your Generative AI Workshop! In this session, you’ll use Data Analysis AI tools to compile a brief report (HTML or PDF) analyzing the relationship between two chosen country indicators from the Gapminder data repository here: <a href="https://gapminder.org/data" target="_blank">https://gapminder.org/data</a>.</p>
<section id="your-final-report-should-contain" class="level2">
<h2 class="anchored" data-anchor-id="your-final-report-should-contain">Your final report should contain:</h2>
<ol type="1">
<li>A world map visualization of your first selected indicator (for the chosen recent year).</li>
<li>A world map visualization of your second selected indicator (for the chosen recent year).</li>
<li>A scatterplot showing the relationship between your two chosen indicators.</li>
<li>A description and interpretation of the relationship between the two indicators. This may include a correlation coefficient (e.g., Pearson’s <span class="math inline">\(r\)</span>) if appropriate, or a qualitative description based on the scatterplot.</li>
<li>A short reflection written by you about the process of interacting with the AI tools. E.g. What was easy? What was difficult? What was surprising? What did you learn?</li>
</ol>
<p>Note that rather than grading the technical precision of the report (we understand that you are not all data analysts), we will simply check that you have followed the overall instructions and written an honest reflection.</p>
</section>
<section id="tool-tracks" class="level2">
<h2 class="anchored" data-anchor-id="tool-tracks">Tool Tracks</h2>
<p>You will choose one of the following tools based on your coding experience:</p>
<ul>
<li><p><strong>Students WITHOUT significant coding experience:</strong> You will use <strong>Julius</strong>, a user-friendly AI data analysis tool with a chat interface.</p></li>
<li><p><strong>Students WITH significant coding experience in R:</strong> You should use <strong>Cursor</strong>, an AI-powered code editor, with R.</p></li>
<li><p><strong>If you finish your assigned tool track early, you are encouraged to try the other one!</strong></p></li>
</ul>
<hr>
</section>
</section>
<section id="part-1-general-setup-data-selection-all-students" class="level1">
<h1>Part 1: General Setup &amp; Data Selection (All Students)</h1>
<ol type="1">
<li><strong>Choose Your Data:</strong>
<ul>
<li>Go to Gapminder’s data repository: <a href="https://gapminder.org/data" target="_blank">https://gapminder.org/data</a></li>
<li>Browse the indicators and <strong>select TWO indicators</strong> of interest that you think might be related:
<ul>
<li>Make sure data is available for the year 2020, as we will be using this year for our analysis. (Official statistics often take a while to be released; 2020 is old enough that accurate data is likely to be available, and recent enough that the data is still relevant.)</li>
<li>If you have no experience with data analysis, you may want to check with an instructor to make sure the indicators you choose actually make sense to analyze together. You can also fall back on the famous life expectancy vs.&nbsp;GDP per capita relationship.</li>
</ul></li>
<li>For each chosen indicator, download the data as a CSV file.</li>
</ul></li>
</ol>
<hr>
</section>
<section id="part-2-tool-specific-instructions" class="level1">
<h1>Part 2: Tool-Specific Instructions</h1>
<p>Please follow the instructions for the tool assigned to your group.</p>
<section id="section-a-for-students-without-prior-coding-experience-using-julius" class="level2">
<h2 class="anchored" data-anchor-id="section-a-for-students-without-prior-coding-experience-using-julius">Section A: For Students WITHOUT Prior Coding Experience (Using Julius)</h2>
<p>You will use Julius, an AI data analysis chat-based tool, to analyze your data and generate content for your report.</p>
<ol type="1">
<li><p><strong>Setup Julius:</strong></p>
<ul>
<li><p>Go to <a href="https://julius.ai/" target="_blank">Julius.ai</a> and sign up. Feel free to skip the initial onboarding flow. You can usually skip it by going to this URL: <a href="https://julius.ai/chat" target="_blank">https://julius.ai/chat</a></p></li>
<li><p>For a 2-week trial of premium features, at the top left of the page, click on the user profile dropdown menu and select “Account Settings”</p></li>
</ul>
<p><img src="images/user_profile_dropdown.jpg" class="img-fluid" width="242"></p>
<p>In the settings menu, click on <strong>Account</strong>, then under <strong>Institutional Codes</strong>, enter the code that will be provided by your instructor in class.</p>
<p><img src="images/institutional_code.jpg" class="img-fluid" width="365"></p>
<ul>
<li>Please do not share this code with anyone outside of the class.</li>
</ul></li>
<li><p><strong>Starting Your Analysis in Julius:</strong></p>
<ul>
<li>Start a new “thread” in Julius.</li>
</ul>
<p><img src="images/new_thread.jpg" class="img-fluid" width="245"></p>
<ul>
<li><p><strong>Select your tools:</strong></p>
<ul>
<li><strong>Code Language:</strong> Julius can use Python or R. Please select <strong>R</strong> since the GRAPH team is more familiar with R as the GRAPH team is more familiar with R, and the instructions below are written for R.</li>
</ul></li>
</ul>
<p><img src="images/change_code_language.jpg" class="img-fluid" width="292"></p>
<ul>
<li><strong>AI Model:</strong> It’s recommended to switch to the <strong>Claude 4.5 Sonnet</strong> model for potentially better results. The model selection is typically in a dropdown menu below the prompt input box.</li>
</ul>
<p><img src="images/change_ai_model.jpg" class="img-fluid" width="349"></p></li>
<li><p><strong>Chatting with Julius (Example Prompt):</strong></p></li>
</ol>
<p>First, upload your two CSV files to the conversation. This ensures Julius has access to your data when you give it instructions. You can drag and drop them in, of you can click on the plus button to the bottom left of the chat window and select “Upload file”.</p>
<p><img src="images/upload_file.jpg" class="img-fluid" width="270"></p>
<p>Now we will write a prompt to Julius to help us create a report on the relationship between two indicators. Edit the prompt below to include the names of your two indicators, then send it to Julius.</p>
<ul>
<li><p><strong>Chat with Julius Example Prompt:</strong></p>
<pre><code>I am writing a report on the relationship between two indicators 

1. [TYPE YOUR INDICATOR 1 NAME HERE]
2. [TYPE YOUR INDICATOR 2 NAME HERE]

Both datasets have been added. 

Run the following steps for the report:
1. For each indicator, briefly view and print the data to understand it first. 
2. Then subset the data to 2020.
3. Create a world map for each indicator in 2020. Use ggplot2 and the maps package to create the plot.
4. Create a scatterplot showing the relationship between these two indicators in 2020.
5. Provide a brief interpretation of the relationship between the two indicators.</code></pre></li>
<li><p><strong>Review and Refine:</strong> Julius will show its steps, data, and plots. Work with it to refine the figures and text until you are happy with the output plots. You can ask it to change the title of a plot, or to use a different color scheme, for example.</p></li>
<li><p>If the AI seems to be going off track or taking too long, look for a square “stop” button (often near the prompt input box) to interrupt it.</p></li>
</ul>
<ol start="4" type="1">
<li><strong>Creating Your Report Document:</strong>
<ul>
<li><strong>Download Outputs:</strong> Download the individual plots (as images, e.g., PNG) or take screenshots of the plots that Julius generates. You can also copy any key text outputs, such as data summaries or interpretations.</li>
<li><strong>Create a DOCX/Google Docs file:</strong> Open a word processor (like Microsoft Word, Google Docs, or Pages) and create a new document.</li>
<li><strong>Assemble report:</strong>
<ul>
<li>Add a title, your name, and the date.</li>
<li>Insert the plots you downloaded.</li>
<li>Paste in the relevant text outputs from Julius.</li>
<li>Organize this content into a clean and readable report.</li>
</ul></li>
</ul></li>
<li><strong>Add Your Reflection:</strong>
<ul>
<li>Before finalizing your report, add your short reflection written by you (not the AI) about the process of interacting with the AI tools. E.g. What was easy? What was difficult? What was surprising? What did you learn?</li>
</ul></li>
<li><strong>Final Output:</strong>
<ul>
<li><strong>Export as PDF</strong> from your word processor. This PDF is your primary submission.</li>
</ul></li>
</ol>
</section>
<section id="section-b-for-students-with-r-coding-experience-using-cursor-with-r" class="level2">
<h2 class="anchored" data-anchor-id="section-b-for-students-with-r-coding-experience-using-cursor-with-r">Section B: For Students WITH R Coding Experience (Using Cursor with R)</h2>
<p>You will use Cursor to generate an R Markdown report. Cursor is an AI-powered code editor that can help you write code and create reports.</p>
<ol type="1">
<li><p><strong>Setup Cursor:</strong></p>
<ul>
<li><p>You’ll need to set up Cursor and can use their free 14-day trial.</p></li>
<li><p>Note: Users in a few countries appear unable to access Cursor at the moment. You may need to use a VPN if this is the case. Or switch to the Julius track.</p></li>
<li><p><strong>Watch our setup video before you begin:</strong> <a href="https://thegraphcourses.org/courses/aiw-2025-q2/topics/ai-automated-data-analysis-with-r-and-cursor-for-r-users-only/" target="_blank">AI Automated Data Analysis with R and Cursor (for R users only)</a></p></li>
<li><p><strong>You should make sure you are actually using the paid 7-day trial of Cursor.</strong> To do this, check your dashboard here: <a href="https://cursor.com/dashboard" target="_blank">https://cursor.com/dashboard</a>. And click the button to start the Pro trial if you are not yet on it.</p></li>
</ul>
<p><img src="images/cursor_7_day_trial.jpg" class="img-fluid" width="483"></p>
<p>You will need to provide your credit card details to start the trial. But you can immediately cancel it without losing the trial by going to <a href="https://cursor.com/dashboard?tab=billing" target="_blank">https://cursor.com/dashboard?tab=billing</a>, then clicking “Manage Subscription” at the top right then “Cancel subscription”.</p></li>
<li><p><strong>Project folder:</strong></p>
<ul>
<li>Create a new project folder on your computer. Place the two CSV files you downloaded from Gapminder into this folder.</li>
</ul></li>
<li><p><strong>Generating Your Report in Cursor:</strong></p>
<ul>
<li><p>Open your project folder in Cursor. Create a new R Markdown (<code>.Rmd</code>) file with an appropriate name.</p></li>
<li><p>Then use Cursor’s “Agent Mode” to help you write the R code and narrative.</p></li>
</ul>
<p><img src="images/agent_mode.jpg" class="img-fluid" width="357"></p>
<ul>
<li><p><strong>Initial Agent Prompt Idea:</strong> Here is an example of an initial agent prompt:</p>
<pre><code>You are an AI agent that creates R data reports.
You create reports by writing code to an Rmarkdown file (with github_document output), knitting that file, then reading the output md file to validate your work.
You repeat this edit, knit, review loop until the reporting task is achieved.
Use plots, tables, and inline R code where appropriate.
Be sure to view a sample of each dataset to understand the data before you write code pertaining to it.
Code should be hidden from the output.
Your task will be further described below.</code></pre></li>
<li><p><strong>Specific Task Prompting Example:</strong></p>
<pre><code>Now create a data report in my Rmd file using the two datasets I've provided:

They are:
- [TYPE YOUR INDICATOR 1 NAME HERE]
- [TYPE YOUR INDICATOR 2 NAME HERE]

The report should:
1. For each indicator, subset the data to 2020.
2. Create a world map visualization for each indicator in 2020.
3. Create a scatterplot showing the relationship between these two indicators in 2020.
4. Provide a brief interpretation of the relationship between the two indicators.</code></pre></li>
<li><p><strong>Troubleshooting R Package Installations:</strong></p>
<ul>
<li>If Cursor has persistent trouble installing R packages, you might need to install them manually. Create a temporary R script (<code>.R</code>) file in your project. In this script, use the <code>install.packages("package_name")</code> command for each required package. Run this script. R might ask you to choose a CRAN mirror (a server to download from); pick any. Once the packages are installed, you can delete the temporary R script.</li>
</ul></li>
<li><p><strong>Iterate and Refine:</strong> Work with the agent to refine the figures and text until you are happy with the report. You can ask it to change the title of a plot, or to use a different color scheme, for example.</p></li>
<li><p><strong>A Note on AI Interaction:</strong></p>
<ul>
<li>If the AI seems to be going off track or taking too long, look for a “stop” button (often near the prompt input box) to interrupt it.</li>
<li>If you don’t like the output, it’s more effective to go back to your previous prompt, edit it to be clearer or more specific, and resubmit, rather than trying to correct the AI with a long series of follow-up messages. Longer conversations can sometimes confuse the AI.</li>
</ul></li>
</ul></li>
<li><p><strong>Add Your Reflection:</strong> Before your final knit, make sure to add your short reflection written by you (not the AI) about the process of interacting with the AI tools. E.g. What was easy? What was difficult? What was surprising? What did you learn? directly into your R Markdown file. This should be part of the narrative of your report.</p></li>
<li><p><strong>Final Output:</strong> Your primary submission will be the HTML file generated from knitting your R Markdown file. (That is, while your AI agent will output the report as an .md file while it is working, you should change the output format when you are done and ready to submit. To do this, in your .Rmd file, change <code>output: github_document</code> to <code>output: html_document</code> in the header section before your final knit.)</p></li>
</ol>
<hr>
</section>
</section>
<section id="part-3-submission" class="level1">
<h1>Part 3: Submission</h1>
<ul>
<li>Upload your final report file (HTML or PDF) to the designated submission link on the course workshop page.</li>
</ul>
<hr>
</section>
<section id="part-4-optional---add-to-your-github-pages-portfolio" class="level1">
<h1>Part 4: Optional - Add to Your GitHub Pages Portfolio</h1>
<p>As a final step, you can add your report to your portfolio website which you created earlier in the course.</p>
<section id="upload-your-report-to-github" class="level2">
<h2 class="anchored" data-anchor-id="upload-your-report-to-github">Upload Your Report to GitHub</h2>
<ul>
<li><p>To get back to your repository home, visit github.com, click on your profile at the top right, then click on “Repositories”</p>
<p><img src="images/github_repositories.jpg" class="img-fluid" width="324"></p></li>
<li><p>Locate and click on your repository, which should be called something like <code>graph-ai-portfolio</code></p></li>
<li><p>Locate the button or icon to “Add file”. Click on it and select “Upload file”</p>
<p><img src="images/add_file_button.jpg" class="img-fluid" width="459"></p></li>
<li><p>Drag your final report file (HTML or PDF) into the box, then click on “Commit changes”</p></li>
</ul>
</section>
<section id="get-the-direct-link-to-your-report" class="level2">
<h2 class="anchored" data-anchor-id="get-the-direct-link-to-your-report">Get the Direct Link to Your Report</h2>
<ul>
<li><p>Click on the name of your uploaded report file (HTML or PDF) → right‑click it → <strong>Copy link address</strong>. Now you have a link to your report file! Paste this into a document you can access later.</p>
<p><img src="images/copy_link_address.jpg" class="img-fluid" width="378"></p></li>
</ul>
</section>
<section id="update-your-portfolio-with-chatgpt-or-gemini" class="level2">
<h2 class="anchored" data-anchor-id="update-your-portfolio-with-chatgpt-or-gemini">Update Your Portfolio with ChatGPT or Gemini</h2>
<ul>
<li><p>Open your portfolio repository again, and navigate to your index.html file.</p>
<p><img src="images/index_html.jpg" class="img-fluid" width="374"></p>
<p>Copy all the code from the index.html file with the copy code button at the top right.</p>
<p><img src="images/copy_code_button.jpg" class="img-fluid" width="372"></p></li>
<li><p>Then, go to ChatGPT or Gemini, paste in your index.html code then ask ChatGPT or Gemini to add a new entry for your new assignment. Your prompt might look something like this:</p>
<pre><code>Please update my portfolio website. I want to add a new project for "Workshop 2: Automated Data Analysis".
Include a description of what I did in the assignment. For example, "Analyzed Gapminder data to explore relationships between two global indicators using AI tools."
Then, add a link to my report: [NOTE: YOU THE STUDENT MUST PASTE THE DIRECT LINK TO YOUR UPLOADED REPORT FILE HERE]</code></pre></li>
<li><p>Copy the new HTML that ChatGPT generated → return to your <em>index.html</em> on GitHub → click the <strong>edit file</strong> (✎) button at the top right.</p>
<p><img src="images/edit_file_button.jpg" class="img-fluid" width="452"></p></li>
<li><p>Delete all the existing code in the file, then paste in the new code from ChatGPT or Gemini.</p></li>
<li><p>At the top right, click the <strong>Commit changes</strong> button.</p></li>
<li><p>Go to Actions tab (if you have GitHub Pages set up with Actions).</p>
<p><img src="images/actions_tab.jpg" class="img-fluid" width="380"></p></li>
<li><p>Click on the latest build to observe the build process.</p>
<p><img src="images/pages_build.jpg" class="img-fluid" width="353"></p></li>
<li><p>After the build is complete, your live site, if refreshed, should now show the new project entry and the link should work!</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>