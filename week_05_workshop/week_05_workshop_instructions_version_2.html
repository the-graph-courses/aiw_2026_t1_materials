<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="The Graph Courses Team">

<title>Workshop: Automation with Relay.app</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="week_05_workshop_instructions_version_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="week_05_workshop_instructions_version_2_files/libs/quarto-html/quarto.js"></script>
<script src="week_05_workshop_instructions_version_2_files/libs/quarto-html/popper.min.js"></script>
<script src="week_05_workshop_instructions_version_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week_05_workshop_instructions_version_2_files/libs/quarto-html/anchor.min.js"></script>
<link href="week_05_workshop_instructions_version_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week_05_workshop_instructions_version_2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week_05_workshop_instructions_version_2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week_05_workshop_instructions_version_2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week_05_workshop_instructions_version_2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#part-1-setting-up-your-google-form-and-data-collection" id="toc-part-1-setting-up-your-google-form-and-data-collection" class="nav-link" data-scroll-target="#part-1-setting-up-your-google-form-and-data-collection">Part 1: Setting Up Your Google Form and Data Collection</a>
  <ul class="collapse">
  <li><a href="#create-your-project-folder" id="toc-create-your-project-folder" class="nav-link" data-scroll-target="#create-your-project-folder">Create Your Project Folder</a></li>
  <li><a href="#build-your-consultation-form" id="toc-build-your-consultation-form" class="nav-link" data-scroll-target="#build-your-consultation-form">Build Your Consultation Form</a></li>
  <li><a href="#test-your-form-and-connect-to-sheets" id="toc-test-your-form-and-connect-to-sheets" class="nav-link" data-scroll-target="#test-your-form-and-connect-to-sheets">Test Your Form and Connect to Sheets</a></li>
  </ul></li>
  <li><a href="#part-2-building-the-automation-with-relay.app" id="toc-part-2-building-the-automation-with-relay.app" class="nav-link" data-scroll-target="#part-2-building-the-automation-with-relay.app">Part 2: Building the Automation with Relay.app</a>
  <ul class="collapse">
  <li><a href="#sign-up-for-a-relay.app-account" id="toc-sign-up-for-a-relay.app-account" class="nav-link" data-scroll-target="#sign-up-for-a-relay.app-account">2.1 Sign Up for a Relay.app Account</a></li>
  <li><a href="#start-creating-a-new-workflow" id="toc-start-creating-a-new-workflow" class="nav-link" data-scroll-target="#start-creating-a-new-workflow">2.2 Start Creating a New Workflow</a></li>
  <li><a href="#use-the-ai-assistant-to-build-the-workflow" id="toc-use-the-ai-assistant-to-build-the-workflow" class="nav-link" data-scroll-target="#use-the-ai-assistant-to-build-the-workflow">2.3 Use the AI Assistant to Build the Workflow</a></li>
  <li><a href="#make-any-final-adjustments" id="toc-make-any-final-adjustments" class="nav-link" data-scroll-target="#make-any-final-adjustments">2.4 Make Any Final Adjustments</a></li>
  <li><a href="#enable-the-workflow" id="toc-enable-the-workflow" class="nav-link" data-scroll-target="#enable-the-workflow">2.5 Enable the Workflow</a></li>
  </ul></li>
  <li><a href="#part-3-embedding-the-form-in-your-website" id="toc-part-3-embedding-the-form-in-your-website" class="nav-link" data-scroll-target="#part-3-embedding-the-form-in-your-website">Part 3: Embedding the Form in Your Website</a>
  <ul class="collapse">
  <li><a href="#get-the-embed-code" id="toc-get-the-embed-code" class="nav-link" data-scroll-target="#get-the-embed-code">Get the Embed Code</a></li>
  <li><a href="#add-to-your-portfolio-website" id="toc-add-to-your-portfolio-website" class="nav-link" data-scroll-target="#add-to-your-portfolio-website">Add to Your Portfolio Website</a>
  <ul class="collapse">
  <li><a href="#copy-your-current-website-code" id="toc-copy-your-current-website-code" class="nav-link" data-scroll-target="#copy-your-current-website-code">Copy Your Current Website Code</a></li>
  <li><a href="#ask-an-llm-to-update-the-html" id="toc-ask-an-llm-to-update-the-html" class="nav-link" data-scroll-target="#ask-an-llm-to-update-the-html">Ask an LLM to Update the HTML</a></li>
  <li><a href="#update-your-website-on-github" id="toc-update-your-website-on-github" class="nav-link" data-scroll-target="#update-your-website-on-github">Update Your Website on GitHub</a></li>
  </ul></li>
  <li><a href="#test-the-full-pipeline" id="toc-test-the-full-pipeline" class="nav-link" data-scroll-target="#test-the-full-pipeline">Test the Full Pipeline</a></li>
  </ul></li>
  <li><a href="#submission" id="toc-submission" class="nav-link" data-scroll-target="#submission">Submission</a>
  <ul class="collapse">
  <li><a href="#optional-add-your-report-to-your-portfolio" id="toc-optional-add-your-report-to-your-portfolio" class="nav-link" data-scroll-target="#optional-add-your-report-to-your-portfolio">Optional: Add Your Report to Your Portfolio</a>
  <ul class="collapse">
  <li><a href="#upload-your-report-to-github" id="toc-upload-your-report-to-github" class="nav-link" data-scroll-target="#upload-your-report-to-github">Upload Your Report to GitHub</a></li>
  <li><a href="#update-your-portfolio-with-chatgpt-or-gemini" id="toc-update-your-portfolio-with-chatgpt-or-gemini" class="nav-link" data-scroll-target="#update-your-portfolio-with-chatgpt-or-gemini">Update Your Portfolio with ChatGPT or Gemini</a></li>
  <li><a href="#get-your-portfolio-website-url" id="toc-get-your-portfolio-website-url" class="nav-link" data-scroll-target="#get-your-portfolio-website-url">Get Your Portfolio Website URL</a></li>
  <li><a href="#get-the-direct-link-to-your-report" id="toc-get-the-direct-link-to-your-report" class="nav-link" data-scroll-target="#get-the-direct-link-to-your-report">Get the Direct Link to Your Report</a></li>
  <li><a href="#copy-your-current-index.html-code" id="toc-copy-your-current-index.html-code" class="nav-link" data-scroll-target="#copy-your-current-index.html-code">Copy Your Current index.html Code</a></li>
  <li><a href="#send-the-prompt-and-update-your-file" id="toc-send-the-prompt-and-update-your-file" class="nav-link" data-scroll-target="#send-the-prompt-and-update-your-file">Send the Prompt and Update Your File</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#part-4-optional-challenge-pubmed-literature-monitor-ungraded" id="toc-part-4-optional-challenge-pubmed-literature-monitor-ungraded" class="nav-link" data-scroll-target="#part-4-optional-challenge-pubmed-literature-monitor-ungraded">Part 4: Optional Challenge: PubMed Literature Monitor <em>(ungraded)</em></a>
  <ul class="collapse">
  <li><a href="#create-your-pubmed-rss-feed" id="toc-create-your-pubmed-rss-feed" class="nav-link" data-scroll-target="#create-your-pubmed-rss-feed">Create Your PubMed RSS Feed</a>
  <ul class="collapse">
  <li><a href="#craft-a-search-query" id="toc-craft-a-search-query" class="nav-link" data-scroll-target="#craft-a-search-query">1. Craft a search query</a></li>
  <li><a href="#search-pubmed-and-create-the-rss-feed" id="toc-search-pubmed-and-create-the-rss-feed" class="nav-link" data-scroll-target="#search-pubmed-and-create-the-rss-feed">2. Search PubMed and create the RSS feed</a></li>
  </ul></li>
  <li><a href="#build-the-relay.app-workflow" id="toc-build-the-relay.app-workflow" class="nav-link" data-scroll-target="#build-the-relay.app-workflow">Build the Relay.app Workflow</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Workshop: Automation with Relay.app</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>The Graph Courses Team </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In this workshop, you’ll add a consultation contact form to your portfolio website. When someone fills it out, mentioning their company and what they need help with, an automation will kick in behind the scenes: it will research the company, use an AI model to draft a professional report on GenAI opportunities for that organization, and email the report to you. That way, before you respond to the inquiry, you have useful context to work with.</p>
<p>Specifically, the automation will:</p>
<ol type="1">
<li>Monitor a Google Sheets spreadsheet for new form submissions</li>
<li>Research the potential client’s company using Google Search</li>
<li>Use an AI model to generate a professional HTML report on GenAI opportunities</li>
<li>Email you the report as an attachment</li>
</ol>
<p>You’ll build this using <a href="https://relay.app" target="_blank">Relay.app</a>, an automation platform that connects different web services with AI models. With its AI assistant, the whole setup takes just a few minutes.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Consulting? Me?
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may be thinking “I’m not qualified to be a GenAI consultant!”. But by now you have a solid understanding of how large language models work and what they can do. That puts you in probably the <strong>top 5% of people</strong> in terms of GenAI literacy, which means you could, in theory, act as a consultant in your own field, helping others figure out how to use these tools effectively.</p>
</div>
</div>
<hr>
</section>
<section id="part-1-setting-up-your-google-form-and-data-collection" class="level1">
<h1>Part 1: Setting Up Your Google Form and Data Collection</h1>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A note on privacy and permissions
</div>
</div>
<div class="callout-body-container callout-body">
<p>Setting up this automation will involve granting Relay.app access to your Google Drive and Google Sheets so it can read form responses and run the workflow. Relay.app is a trusted service that we have vetted, and only actions you explicitly set up will be taken: it won’t read or modify anything else in your account. If you’re still concerned though, you may want to create a separate Google account for this workshop.</p>
</div>
</div>
<section id="create-your-project-folder" class="level2">
<h2 class="anchored" data-anchor-id="create-your-project-folder">Create Your Project Folder</h2>
<ol type="1">
<li>In your browser, navigate to <a href="https://drive.google.com/" target="_blank">drive.google.com</a></li>
<li>Click <strong>New</strong> at the top left, then click <strong>New folder</strong></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/new_folder.jpg" class="img-fluid figure-img" alt="Create a new folder" width="300"></p>
<figcaption>Figure: Create a new folder.</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Name the folder something like <code>GenAI Consultations</code></li>
<li>Double-click to open the folder</li>
</ol>
<p><img src="https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-06-06/6e163120-758c-4186-b7f3-be06417a2cd6/File.jpeg?tl_px=0,0&amp;br_px=1376,769&amp;force_format=jpeg&amp;q=100&amp;width=1120.0&amp;wat=1&amp;wat_opacity=0.7&amp;wat_gravity=northwest&amp;wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&amp;wat_pad=337,171" class="img-fluid" width="619"></p>
</section>
<section id="build-your-consultation-form" class="level2">
<h2 class="anchored" data-anchor-id="build-your-consultation-form">Build Your Consultation Form</h2>
<ol type="1">
<li><p>Inside the folder, click <strong>New</strong> → <strong>Google Forms</strong>. You can close the Gemini quickstart helper if that pops up.</p></li>
<li><p>In the title field enter: <code>Consultation Inquiry</code></p></li>
<li><p>Set up the following form questions:</p>
<ul>
<li><strong>Question 1:</strong> “Name” (Short answer)</li>
<li><strong>Question 2:</strong> “Email” (Short answer)</li>
<li><strong>Question 3:</strong> “What is your company name and primary geographic area?” (Short answer)</li>
<li><strong>Question 4:</strong> “What would you like help with?” (Paragraph)</li>
</ul></li>
</ol>
<p><img src="images/consultation_form.jpg" class="img-fluid" width="525"></p>
<ol start="4" type="1">
<li>When done, click <strong>Publish</strong> at the top right to make your form live.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/forms_publish_button.jpg" class="img-fluid figure-img" alt="Publish the form" width="300"></p>
<figcaption>Figure: Publish the form.</figcaption>
</figure>
</div>
</section>
<section id="test-your-form-and-connect-to-sheets" class="level2">
<h2 class="anchored" data-anchor-id="test-your-form-and-connect-to-sheets">Test Your Form and Connect to Sheets</h2>
<ol type="1">
<li><p>Click the Share button at the top right, then copy the responder link.</p></li>
<li><p>Paste that link into a new tab and submit a test response. Try to use a real organization you know and care about. Example:</p>
<ul>
<li>Name: <code>John Doe</code></li>
<li>Email: <code>john.doe@example.com</code></li>
<li>Company: <code>The Graduate Institute, Geneva</code></li>
<li>Help needed: <code>General advice on how to use GenAI to help students</code></li>
</ul></li>
<li><p>Return to the form editor tab and click <strong>Responses</strong>. You should see your new submission.</p></li>
<li><p>Click <strong>Link to Sheets</strong> → <strong>Create</strong> to generate a connected spreadsheet.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/link_to_sheets_n.jpg" class="img-fluid figure-img" alt="Link to Sheets" width="300"></p>
<figcaption>Figure: Link to Sheets.</figcaption>
</figure>
</div>
<ol start="5" type="1">
<li>Open the connected spreadsheet. You should see your test response as a row. Keep this tab open; you’ll need to point Relay.app to this spreadsheet shortly.</li>
</ol>
<hr>
</section>
</section>
<section id="part-2-building-the-automation-with-relay.app" class="level1">
<h1>Part 2: Building the Automation with Relay.app</h1>
<section id="sign-up-for-a-relay.app-account" class="level2">
<h2 class="anchored" data-anchor-id="sign-up-for-a-relay.app-account">2.1 Sign Up for a Relay.app Account</h2>
<ol type="1">
<li><p>Navigate to <a href="https://relay.app" target="_blank">relay.app</a> and sign up with the same Google account you used for your Google Form.</p></li>
<li><p>You may be asked to add your LinkedIn profile. Up to you whether you want to do this or skip.</p></li>
</ol>
</section>
<section id="start-creating-a-new-workflow" class="level2">
<h2 class="anchored" data-anchor-id="start-creating-a-new-workflow">2.2 Start Creating a New Workflow</h2>
<ol type="1">
<li><p>You may land on a page asking you to create an “agent.” You can skip this by going directly to the workflow dashboard at <a href="https://run.relay.app/dashboard" target="_blank">https://run.relay.app/dashboard</a></p></li>
<li><p>On the left-hand sidebar, click the plus icon to create a new <strong>Workflow</strong>.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/create_new_workflow_button_n.jpg" class="img-fluid figure-img" alt="Create a new workflow" width="318"></p>
<figcaption>Figure: Create a new workflow.</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Relay will open the workflow editor, with an AI assistant panel on the left.</li>
</ol>
</section>
<section id="use-the-ai-assistant-to-build-the-workflow" class="level2">
<h2 class="anchored" data-anchor-id="use-the-ai-assistant-to-build-the-workflow">2.3 Use the AI Assistant to Build the Workflow</h2>
<p>Rather than configuring each step manually, we’ll let the AI assistant build the workflow from a prompt.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We’ve written the prompt for you below. Writing these prompts takes some practice, but the steps can be described in plain language. You’ll learn how to craft these yourself over time as you build more workflows. For now, we’ll explain why we chose each specification after the prompt.</p>
</div>
</div>
<ol type="1">
<li>Copy the prompt below and paste it into the AI assistant text box.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste_your_prompt_here_n.jpg" class="img-fluid figure-img" alt="Paste your prompt here" width="532"></p>
<figcaption>Figure: Paste your prompt here.</figcaption>
</figure>
</div>
<p><strong>Prompt to paste:</strong></p>
<pre><code>I have a Google spreadsheet that is updated when clients fill out my contact form.

For each new submission, I want a report of genAI opportunities for the client's organization emailed to me.

First, our automation should research the company, using Google search, returning 3 results.

Then we will use Gemini Flash to draft a report. The report should be rich, colorful, and professional.

The report file should be created with the plain text file tool, but with an HTML extension.

Finally, an email should be sent to me using the email yourself tool (not gmail), with the report attached. </code></pre>
<ol start="2" type="1">
<li>Click send.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Why these specifications?</strong> You’ll learn to write prompts like this over time. Here’s the reasoning behind a few of the choices:</p>
<ul>
<li><strong>“returning 3 results”</strong>: The Google Search step defaults to about 5 results, which uses more AI credits than we need for this task. Two or three results is plenty.</li>
<li><strong>“Gemini Flash”</strong>: If you don’t specify a model, Relay.app may default to a larger model like Anthropic’s Sonnet, which is more powerful but also more expensive. The free plan only gives you <strong>500 AI credits</strong>, so it’s worth being deliberate about which model you use. Gemini Flash is fast, cheap, and capable enough for th is task.</li>
<li><strong>“email yourself tool (not gmail)”</strong>: Relay.app has a built-in “Email Yourself” tool that lets you send an email to your own address without needing to connect your Google/Gmail account. This keeps things simple.</li>
</ul>
</div>
</div>
<ol start="3" type="1">
<li>The assistant will respond with a plan, then ask you to connect to Google Sheets. Click <strong>Connect</strong> and log in with the same Google account.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/connect_to_google_sheets_n.jpg" class="img-fluid figure-img" alt="Connect to Google Sheets" width="390"></p>
<figcaption>Figure: Connect to Google Sheets.</figcaption>
</figure>
</div>
<ol start="4" type="1">
<li>Google will ask what permissions to grant. Grant all three.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/grant_permissions.jpg" class="img-fluid figure-img" alt="Grant permissions to Relay.app" width="461"></p>
<figcaption>Figure: Grant permissions to Relay.app.</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>As mentioned above, these are broad permissions, but only your explicitly configured workflow actions will be taken.</p>
</div>
</div>
<ol start="5" type="1">
<li>Next, select the sheet that holds your contact form responses.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/select_sheet_n.jpg" class="img-fluid figure-img" alt="Select the sheet that holds your contact form responses" width="415"></p>
<figcaption>Figure: Select your sheet.</figcaption>
</figure>
</div>
<ol start="6" type="1">
<li>The assistant will then ask you to test the workflow.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/test_workflow_n.jpg" class="img-fluid figure-img" alt="Test the workflow" width="347"></p>
<figcaption>Figure: Test the workflow.</figcaption>
</figure>
</div>
<ol start="7" type="1">
<li>Click the test button and select the row you submitted earlier. The workflow will run and after a moment you should receive an email with the report attached. To view the HTML report, download it and open it in your browser.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The “Email Yourself” tool only sends to your own address. To email others, you can connect a Gmail or Outlook integration instead.</p>
</div>
</div>
<p>Below is an example report:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/example_report_relay.jpg" class="img-fluid figure-img" alt="Example report generated by Relay.app" width="520"></p>
<figcaption>Figure: Example report from Relay.app.</figcaption>
</figure>
</div>
</section>
<section id="make-any-final-adjustments" class="level2">
<h2 class="anchored" data-anchor-id="make-any-final-adjustments">2.4 Make Any Final Adjustments</h2>
<p>If any step looks wrong, or if you don’t like the final output, you can click to edit the workflow steps, or describe the problem and/or fix to the AI in the chat panel on the left. For example, you might say <em>“Tell the AI model in the workflow to draft a more concise report”</em>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>To learn more about customizing Relay.app automations, see this video with one of the Founders. (The building demo starts around minute 7):</p>
<div class="quarto-video"><iframe data-external="1" src="https://www.youtube.com/embed/JIkqjyKwJDk" width="500" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</div>
</div>
</section>
<section id="enable-the-workflow" class="level2">
<h2 class="anchored" data-anchor-id="enable-the-workflow">2.5 Enable the Workflow</h2>
<ol type="1">
<li>Once you’re happy with the report, toggle the trigger from <strong>Off</strong> to <strong>On</strong>. The toggle turns green and the workflow is live.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/turn_on_instant_trigger.jpg" class="img-fluid figure-img" alt="Turn on instant trigger" width="472"></p>
<figcaption>Figure: Turn on instant trigger.</figcaption>
</figure>
</div>
<p>Your automation is now active. Every new form submission will automatically trigger the full workflow.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For reference, here is what each step of the workflow should roughly look like. Your specific steps may vary slightly, but the general idea should be the same.</p>
<p><strong>Step 1: New contact form submission (trigger).</strong> The trigger fires when a new row is added to your “Form Responses 1” sheet.</p>
<p><img src="images/step_1_new_row_trigger.jpg" class="img-fluid" alt="Step 1: New row trigger" width="640"></p>
<p><strong>Step 2: Research company.</strong> A Google search is run using the company name from the form, returning 2 to 3 results.</p>
<p><img src="images/step_2_research_company.jpg" class="img-fluid" alt="Step 2: Research company" width="633"></p>
<p><strong>Step 3: Draft GenAI opportunities report.</strong> Gemini Flash drafts a plain text (HTML)report based on the search results, with sections covering an executive summary, company overview and top GenAI opportunities.</p>
<p><img src="images/step_3_ai_drafter.jpg" class="img-fluid" alt="Step 3: AI drafter" width="633"></p>
<p><strong>Step 4: Create HTML report file.</strong> The AI output is saved as a plain text file with an <code>.html</code> extension, named after the client.</p>
<p><img src="images/step_4_create_text_file_with_html_extension.jpg" class="img-fluid" alt="Step 4: Create text file with HTML extension" width="659"></p>
<p><strong>Step 5: Email report to me.</strong> The report is emailed to you using the “Email Yourself” tool, with the HTML file attached and a summary of the submission details in the body.</p>
<p><img src="images/step_5_email_report_to_self.jpg" class="img-fluid" alt="Step 5: Email report to self" width="692"></p>
<p>If any step looks wrong, click on it and edit it manually, or describe the fix to the AI in the chat panel on the left.</p>
</div>
</div>
<hr>
</section>
</section>
<section id="part-3-embedding-the-form-in-your-website" class="level1">
<h1>Part 3: Embedding the Form in Your Website</h1>
<section id="get-the-embed-code" class="level2">
<h2 class="anchored" data-anchor-id="get-the-embed-code">Get the Embed Code</h2>
<ol type="1">
<li>Return to your Google Form</li>
<li>Click the three-dot menu (⋮) in the top right</li>
<li>Select <strong>Embed HTML</strong></li>
<li>Copy the provided HTML embed code</li>
</ol>
<p><img src="https://colony-recorder.s3.amazonaws.com/files/2025-06-06/390e2496-d4ca-4073-a977-ff9a638f18ff/File.webp" class="img-fluid"></p>
</section>
<section id="add-to-your-portfolio-website" class="level2">
<h2 class="anchored" data-anchor-id="add-to-your-portfolio-website">Add to Your Portfolio Website</h2>
<p>You’ll use an LLM to add the form to your portfolio HTML, then push the changes to GitHub.</p>
<section id="copy-your-current-website-code" class="level3">
<h3 class="anchored" data-anchor-id="copy-your-current-website-code">Copy Your Current Website Code</h3>
<ol type="1">
<li><p>Go to <a href="https://github.com" target="_blank">github.com</a>. Click your profile icon at the top right → <strong>Your repositories</strong>.</p>
<p><img src="images/github_repositories.jpg" class="img-fluid" width="324"></p></li>
<li><p>Locate and click on your portfolio repository (it should be called something like <code>graph-ai-portfolio</code>).</p></li>
<li><p>Click on the <code>index.html</code> file.</p>
<p><img src="images/index_html.jpg" class="img-fluid" width="374"></p></li>
<li><p>Copy all the code from the file using the <strong>copy</strong> button at the top right of the code view.</p>
<p><img src="images/copy_code_button.jpg" class="img-fluid" width="372"></p></li>
</ol>
</section>
<section id="ask-an-llm-to-update-the-html" class="level3">
<h3 class="anchored" data-anchor-id="ask-an-llm-to-update-the-html">Ask an LLM to Update the HTML</h3>
<ol type="1">
<li><p>Go to ChatGPT, Gemini, or your preferred LLM.</p></li>
<li><p>Paste a prompt like the one below, filling in your embed code and your current <code>index.html</code> code where indicated:</p></li>
</ol>
<pre><code>I want to update my portfolio website to include a consultation form.

Add a new section called "Contact for Consultation" and embed this Google Form:

[PASTE YOUR GOOGLE FORM EMBED CODE HERE]

Below is my current index.html code. Please return the FULL updated HTML file:

[PASTE YOUR ENTIRE index.html CODE HERE]</code></pre>
<ol start="3" type="1">
<li>Review the LLM’s output to make sure it looks reasonable (e.g., your existing content is still there and the embed code has been added).</li>
</ol>
</section>
<section id="update-your-website-on-github" class="level3">
<h3 class="anchored" data-anchor-id="update-your-website-on-github">Update Your Website on GitHub</h3>
<ol type="1">
<li><p>Back in your repository on GitHub, navigate to <code>index.html</code> and click the <strong>edit file</strong> (pencil) button at the top right.</p>
<p><img src="images/edit_file_button.jpg" class="img-fluid" width="452"></p></li>
<li><p>Select all the existing code in the editor and delete it, then paste in the new HTML from the LLM.</p></li>
<li><p>Click the <strong>Commit changes</strong> button at the top right to save.</p></li>
<li><p>Your live site will update automatically. This may take 3 to 5 minutes. You can track the deployment status by clicking the <strong>Actions</strong> tab in your repository.</p>
<p><img src="images/actions_tab.jpg" class="img-fluid" width="380"></p></li>
<li><p>Once the build completes, visit your GitHub Pages URL and confirm the consultation form section appears on your site. You may need to hard-refresh the page (Ctrl+Shift+R or Cmd+Shift+R) to bypass your browser’s cache.</p>
<p><img src="images/pages_build.jpg" class="img-fluid" width="353"></p></li>
</ol>
</section>
</section>
<section id="test-the-full-pipeline" class="level2">
<h2 class="anchored" data-anchor-id="test-the-full-pipeline">Test the Full Pipeline</h2>
<p>Now test the entire pipeline end to end.</p>
<ol type="1">
<li><p>Visit your live GitHub Pages site and fill out the consultation form. Use a different company name than your earlier test so you can identify the new submission.</p></li>
<li><p>Wait a minute or two for Relay.app to pick it up (it uses event-based triggers, so it should be quick).</p></li>
<li><p>Check your email for the report and review the HTML attachment.</p></li>
</ol>
<p>If a report arrives, your automation is working end to end, from website visitor to delivered report!</p>
<hr>
</section>
</section>
<section id="submission" class="level1">
<h1>Submission</h1>
<p>To submit your work, take a screenshot showing your completed workflow in Relay.app (showing all the steps) and upload it to the submission box on the course website.</p>
<hr>
<section id="optional-add-your-report-to-your-portfolio" class="level2">
<h2 class="anchored" data-anchor-id="optional-add-your-report-to-your-portfolio">Optional: Add Your Report to Your Portfolio</h2>
<p>If you received an HTML report from the automation, you can add it to your GitHub Pages portfolio website under a section for this week’s workshop.</p>
<section id="upload-your-report-to-github" class="level3">
<h3 class="anchored" data-anchor-id="upload-your-report-to-github">Upload Your Report to GitHub</h3>
<ol type="1">
<li><p>First, download the HTML report from the email attachment (if you haven’t already).</p></li>
<li><p>Go to <a href="https://github.com" target="_blank">github.com</a>. Click your profile icon at the top right → <strong>Your repositories</strong>.</p>
<p><img src="images/github_repositories.jpg" class="img-fluid" width="324"></p></li>
<li><p>Locate and click on your portfolio repository (e.g., <code>graph-ai-portfolio</code>).</p></li>
<li><p>Click <strong>Add file</strong> → <strong>Upload files</strong>.</p>
<p><img src="images/add_file_button.jpg" class="img-fluid" width="459"></p></li>
<li><p>Drag your HTML report file into the box, then click <strong>Commit changes</strong>.</p></li>
</ol>
</section>
<section id="update-your-portfolio-with-chatgpt-or-gemini" class="level3">
<h3 class="anchored" data-anchor-id="update-your-portfolio-with-chatgpt-or-gemini">Update Your Portfolio with ChatGPT or Gemini</h3>
<ol type="1">
<li>Go to ChatGPT, Gemini, or your preferred LLM and start typing a prompt like the one below. The parts in square brackets will need to be filled in with information you’ll gather in the next steps.</li>
</ol>
<pre><code>I want to update my portfolio website. In your response, you will provide the FULL updated HTML code for the index.html file.

The portfolio website is hosted at 

[YOUR PORTFOLIO WEBSITE URL HERE].

---

I want to add a new link for the project page for "Workshop 5: Automation with Relay.app".

For this project, I built an automated workflow that processes consultation form submissions, researches the client's company, and generates a professional GenAI opportunities report.

The report is available at the link below. It is an HTML file, so reformat the link to be a clickable GitHub Pages link, since it is hosted on the same GitHub repo as the portfolio website.

[PASTE THE DIRECT LINK TO YOUR UPLOADED REPORT FILE HERE]

---

Below is my current HTML file:

[PASTE THE ENTIRE HTML FILE HERE]</code></pre>
<ol start="2" type="1">
<li>Now, gather the information you need to complete the prompt:</li>
</ol>
</section>
<section id="get-your-portfolio-website-url" class="level3">
<h3 class="anchored" data-anchor-id="get-your-portfolio-website-url">Get Your Portfolio Website URL</h3>
<ul>
<li><p>To get your portfolio website URL, go to your portfolio repository on GitHub. You can do this by clicking on the “Repositories” button at the top right of the page and then clicking on your portfolio repository.</p></li>
<li><p>Click on the “Settings” tab.</p></li>
<li><p>Scroll down to the “GitHub Pages” section.</p></li>
<li><p>Your portfolio website URL will be listed under “GitHub Pages”. Copy and paste this into your prompt.</p>
<p><img src="images/github_pages_url.jpg" class="img-fluid" width="378"></p></li>
</ul>
</section>
<section id="get-the-direct-link-to-your-report" class="level3">
<h3 class="anchored" data-anchor-id="get-the-direct-link-to-your-report">Get the Direct Link to Your Report</h3>
<ul>
<li><p>Go back to your portfolio repository’s main page and right‑click on the name of your uploaded report then → <strong>Copy link address</strong>. Paste this into your prompt.</p>
<p><img src="images/copy_link_address_report.jpg" class="img-fluid" width="378"></p></li>
</ul>
</section>
<section id="copy-your-current-index.html-code" class="level3">
<h3 class="anchored" data-anchor-id="copy-your-current-index.html-code">Copy Your Current index.html Code</h3>
<ul>
<li><p>Still in your portfolio repository, navigate to your index.html file.</p>
<p><img src="images/index_html.jpg" class="img-fluid" width="374"></p></li>
<li><p>Copy all the code from the index.html file with the copy code button at the top right. Paste this into your prompt.</p>
<p><img src="images/copy_code_button.jpg" class="img-fluid" width="372"></p></li>
</ul>
</section>
<section id="send-the-prompt-and-update-your-file" class="level3">
<h3 class="anchored" data-anchor-id="send-the-prompt-and-update-your-file">Send the Prompt and Update Your File</h3>
<ul>
<li><p>Now that you’ve filled in all the placeholders, send the prompt to ChatGPT or Gemini</p></li>
<li><p>Copy the new HTML that the LLM generated → return to your <em>index.html</em> on GitHub → click the <strong>edit file</strong> (✎) button at the top right.</p>
<p><img src="images/edit_file_button.jpg" class="img-fluid" width="452"></p></li>
<li><p>Delete all the existing code in the file, then paste in the new code from ChatGPT or Gemini.</p></li>
<li><p>At the top right, click the <strong>Commit changes</strong> button.</p></li>
<li><p>Go to Actions tab (if you have GitHub Pages set up with Actions).</p>
<p><img src="images/actions_tab.jpg" class="img-fluid" width="380"></p></li>
<li><p>Click on the latest build to observe the build process.</p>
<p><img src="images/pages_build.jpg" class="img-fluid" width="353"></p></li>
<li><p>After the build is complete, your live site, if refreshed, should now show the new project entry and the link should work!</p></li>
</ul>
<hr>
</section>
</section>
</section>
<section id="part-4-optional-challenge-pubmed-literature-monitor-ungraded" class="level1">
<h1>Part 4: Optional Challenge: PubMed Literature Monitor <em>(ungraded)</em></h1>
<p>Build an automation that monitors academic literature and sends you a weekly digest. You will:</p>
<ol type="1">
<li>Create a PubMed search query for a topic of your choice</li>
<li>Generate an RSS feed from that search</li>
<li>Build a Relay.app workflow that checks the feed every Monday, summarizes recent papers, and connects them to your research background</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This challenge is less guided, with fewer screenshots. You’ll need to be more independent.</p>
</div>
</div>
<section id="create-your-pubmed-rss-feed" class="level2">
<h2 class="anchored" data-anchor-id="create-your-pubmed-rss-feed">Create Your PubMed RSS Feed</h2>
<section id="craft-a-search-query" class="level3">
<h3 class="anchored" data-anchor-id="craft-a-search-query">1. Craft a search query</h3>
<p>PubMed searches use Boolean operators. You can write one yourself if you’re familiar with the syntax, or use an LLM to help.</p>
<p>Pick a topic, for example :</p>
<ul>
<li>Any paper about arboviruses in a top 5 medical journal</li>
<li>Generative AI and epidemiology</li>
<li>Clinical trials for a specific disease (e.g., malaria vaccine trials)</li>
</ul>
<p>Ask an LLM to help you craft the query. For example:</p>
<pre><code>Help me create a PubMed search query using Boolean operators.
Return just the query string I can paste into PubMed.
I will use this to create a weekly RSS feed eventually.
The topic is:
[YOUR TOPIC HERE]</code></pre>
<p>Replace <code>[YOUR TOPIC HERE]</code> with the topic you picked. The model will respond with a query string you can copy.</p>
</section>
<section id="search-pubmed-and-create-the-rss-feed" class="level3">
<h3 class="anchored" data-anchor-id="search-pubmed-and-create-the-rss-feed">2. Search PubMed and create the RSS feed</h3>
<ol type="1">
<li>Go to <a href="https://pubmed.ncbi.nlm.nih.gov" target="_blank">pubmed.ncbi.nlm.nih.gov</a>, paste your query into the search box, and press <strong>Search</strong>.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Aim for 100 to 1,000 total results. Too broad gives generic papers; too narrow means nothing new each week. Check the result count and refine with the LLM if needed.</p>
</div>
</div>
<ol start="2" type="1">
<li>Just below the search bar, click the <strong>Create RSS</strong> link.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/create_rss_button.jpg" class="img-fluid figure-img" alt="Create RSS button on PubMed" width="539"></p>
<figcaption>Figure: Create RSS button on PubMed.</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Change <em>Number of items displayed</em> to <strong>10</strong>, then click <strong>Create RSS</strong>. A URL appears in the <em>Your RSS Feed Link</em> box. Copy it.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rss_settings.jpg" class="img-fluid figure-img" alt="RSS feed settings" width="629"></p>
<figcaption>Figure: RSS feed settings.</figcaption>
</figure>
</div>
</section>
</section>
<section id="build-the-relay.app-workflow" class="level2">
<h2 class="anchored" data-anchor-id="build-the-relay.app-workflow">Build the Relay.app Workflow</h2>
<ol type="1">
<li><p>Create a new workflow in Relay.app as you did before.</p></li>
<li><p>Paste the prompt below into the AI assistant, replacing the placeholders with your RSS URL and a short summary of your professional background (you can use an LLM to summarize your CV).</p></li>
</ol>
<pre><code>Every Monday morning, we want to get the latest 10 publications from this RSS feed:

[PASTE YOUR PUBMED RSS URL HERE]

Using Gemini Flash, summarize each one in a single line and include the link to the full publication.

Then, at the end of the report, using my CV summary below as context,
mention a few ways any of these publications might be relevant to my own work.

Send the whole thing to me using the Email Yourself tool (not Gmail).

My professional background:

[PASTE YOUR OWN PROFESSIONAL BACKGROUND HERE]</code></pre>
<ol start="3" type="1">
<li>Review the steps, run a test, and if the output looks good, activate the workflow. You’ll now get a literature digest every Monday morning.</li>
</ol>
<p>To submit, take a screenshot of the workflow and upload it to the submission box on the course website.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>